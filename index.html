<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Lucia üíò</title>
  <style>
    :root{
      --bg:#1a0b14; --card:#2b0f1f; --accent:#ff4d8d; --accent2:#ff2b55;
      --text:#ffe6f0; --muted:#caa3b7; --shadow: 0 18px 50px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; display:grid; place-items:center; background:
        radial-gradient(1200px 600px at 10% 10%, rgba(255,77,141,.14), transparent 55%),
        radial-gradient(900px 520px at 90% 20%, rgba(255,43,85,.10), transparent 55%),
        radial-gradient(800px 520px at 40% 95%, rgba(255,77,141,.10), transparent 55%),
        var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      overflow:hidden;
    }
    .wrap{width:min(560px,92vw); padding:20px}
    .card{
      position:relative;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      border-radius:24px;
      box-shadow: var(--shadow);
      padding:26px 22px 22px;
      backdrop-filter: blur(10px);
    }
    .title{
      font-size: clamp(22px, 4.4vw, 30px);
      font-weight: 800;
      letter-spacing:.2px;
      margin:0 0 6px;
      text-align:center;
    }
    .sub{
      margin:0 0 18px;
      text-align:center;
      color:var(--muted);
      font-weight:600;
    }
    .msg{
      text-align:center;
      min-height:56px;
      font-size: clamp(16px, 3.8vw, 18px);
      line-height:1.35;
      margin:10px 0 18px;
      padding:10px 8px;
      border-radius:16px;
      background: rgba(0,0,0,.14);
      border:1px solid rgba(255,255,255,.08);
    }

    .playarea{
      position:relative;
      height: 92px;              /* keeps layout stable on iPhone */
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .btnrow{display:flex; gap:12px; justify-content:center; flex-wrap:wrap}

    button{
      appearance:none;
      border:0;
      border-radius:14px;
      padding:12px 16px;
      font-weight:800;
      font-size:16px;
      cursor:pointer;
      transition: transform .08s ease, filter .18s ease, opacity .18s ease;
      user-select:none;
    }
    button:active{transform:scale(.98)}
    .yes{background: linear-gradient(90deg, var(--accent), var(--accent2)); color:#1a0b14}
    .no{
      background: rgba(255,255,255,.08);
      color:var(--text);
      border:1px solid rgba(255,255,255,.12);
    }
    .note{
      margin:14px 0 0;
      text-align:center;
      color:rgba(255,230,240,.65);
      font-size:13px;
    }

    /* Shake animation for the "No" button */
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20% { transform: translateX(-10px); }
      40% { transform: translateX(10px); }
      60% { transform: translateX(-8px); }
      80% { transform: translateX(8px); }
    }
    .shake { animation: shake .35s ease; }

    /* floating hearts */
    .heart{
      position:fixed;
      left:0; top:0;
      pointer-events:none;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.35));
      animation: floatUp linear forwards;
    }
    @keyframes floatUp{
      from{ transform: translate(var(--x), calc(100vh + 20px)) scale(var(--s)); opacity:0}
      10%{opacity:1}
      to{ transform: translate(calc(var(--x) + var(--drift)), -80px) scale(calc(var(--s) * 1.1)); opacity:0}
    }

    /* confetti burst */
    .burst{
      position:fixed; inset:0; pointer-events:none;
    }
    .burst span{
      position:absolute;
      left:50%; top:55%;
      transform: translate(-50%,-50%);
      font-size:22px;
      animation: pop .9s ease forwards;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.35));
    }
    @keyframes pop{
      from{opacity:0; transform: translate(-50%,-50%) scale(.4)}
      20%{opacity:1}
      to{
        opacity:0;
        transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.2);
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <h1 class="title">Lucia‚Ä¶ will you be my valentine? üíñ</h1>
      <p class="sub">Choose wisely üòè</p>

      <div class="msg" id="msg"></div>

      <div class="playarea" id="playarea">
        <div class="btnrow">
          <button class="yes" id="yesBtn">A: Yes üíï</button>
          <button class="no" id="noBtn">B: No üòè</button>
        </div>
      </div>

      <div class="note">Tip: works on phone too ‚Äî just tap üòå</div>
    </div>
  </div>

  <div class="burst" id="burst"></div>

  <script>
    const msg = document.getElementById('msg');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn  = document.getElementById('noBtn');
    const burst  = document.getElementById('burst');

    let noCount = 0;
    let heartsTimer = null;

    function setMsg(t){ msg.textContent = t; }

    // gentle ambient hearts
    function spawnHeart(){
      const el = document.createElement('div');
      el.className = 'heart';
      const icons = ["üíñ","üíï","üíó","üíû"];
      el.textContent = icons[Math.floor(Math.random()*icons.length)];
      const x = Math.random()*100;              // vw
      const drift = (Math.random()*120 - 60);   // px
      const s = (Math.random()*0.9 + 0.6).toFixed(2);
      const dur = (Math.random()*3.2 + 3.2).toFixed(2); // seconds
      el.style.setProperty('--x', x + 'vw');
      el.style.setProperty('--drift', drift + 'px');
      el.style.setProperty('--s', s);
      el.style.animationDuration = dur + 's';
      el.style.fontSize = (18 + Math.random()*18) + 'px';
      document.body.appendChild(el);
      el.addEventListener('animationend', ()=> el.remove());
    }

    function startHearts(){
      if (heartsTimer) return;
      heartsTimer = setInterval(spawnHeart, 420);
    }
    function stopHearts(){
      if (!heartsTimer) return;
      clearInterval(heartsTimer);
      heartsTimer = null;
    }

    function confetti(){
      const emojis = ["üíñ","üíï","üíó","üíû","‚ù§Ô∏è","‚ú®"];
      for (let i=0;i<38;i++){
        const s = document.createElement('span');
        s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        const a = Math.random()*Math.PI*2;
        const r = 120 + Math.random()*220;
        s.style.setProperty('--dx', (Math.cos(a)*r) + 'px');
        s.style.setProperty('--dy', (Math.sin(a)*r) + 'px');
        s.style.left = (45 + Math.random()*10) + '%';
        s.style.top  = (52 + Math.random()*10) + '%';
        s.style.animationDelay = (Math.random()*0.12) + 's';
        burst.appendChild(s);
        s.addEventListener('animationend', ()=> s.remove());
      }
    }

    function shakeNo(){
      noBtn.classList.remove('shake');
      // reflow to restart animation
      void noBtn.offsetWidth;
      noBtn.classList.add('shake');
    }

    // initial
    setMsg("");

    yesBtn.addEventListener('click', ()=>{
      setMsg("I always knew you‚Äôd say yes ‚ù§Ô∏è");
      noBtn.disabled = true;
      noBtn.style.opacity = 0.35;
      confetti();
      startHearts();
      setTimeout(confetti, 140);
      setTimeout(confetti, 280);
    });

    noBtn.addEventListener('click', ()=>{
      noCount++;
      shakeNo();

      if (noCount === 1){
        setMsg("Lets try that again. üòè");
      } else if (noCount === 2){
        setMsg("Mhm‚Ä¶ still no. üòå");
      } else {
        setMsg("No more saying no for you. üòâ");
        noBtn.style.opacity = 0;
        noBtn.style.pointerEvents = "none";
        setTimeout(()=> noBtn.remove(), 350);
        yesBtn.animate([
          { transform: "scale(1)" },
          { transform: "scale(1.06)" },
          { transform: "scale(1)" }
        ], { duration: 520, iterations: 2 });
      }
    });

    startHearts();
    document.addEventListener('visibilitychange', ()=>{
      if (document.hidden) stopHearts(); else startHearts();
    });
  </script>
</body>
</html>
